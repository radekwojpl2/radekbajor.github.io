<!DOCTYPE html>
<html lang="en-us"><title>
    Covid-19 Api | 
    
    JrDevLife</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<meta name="description" 
      content="Opis projektu Covid-19 App, Covid19.Api część 1
                ">

<link rel="canonical" href="http://example.org/covid19project/covid-19-api/" />

<link rel="icon" type="image/png" href="http://example.org/image/favicon.ico">

<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/bulma.min.css">

<meta property="og:title" content="Covid-19 Api" />
<meta property="og:description" content="Opis projektu Covid-19 App, Covid19.Api część 1" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/covid19project/covid-19-api/" />
<meta property="article:published_time" content="2020-05-05T16:55:02+02:00" />
<meta property="article:modified_time" content="2020-05-05T16:55:02+02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Covid-19 Api"/>
<meta name="twitter:description" content="Opis projektu Covid-19 App, Covid19.Api część 1"/>



    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'analytics-code', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



<script src=/js/ramium.js></script>
<link rel="stylesheet" href=/css/ramium.css>






<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'analytics-code', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<body><nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href=/>
      
      <strong>JrDevLife </strong>
      
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
      data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      
      
      <a class="navbar-item" href="/">Home</a>
      
      
      
      <a class="navbar-item" href="/author/">Author</a>
      
      
    </div>

    <div class="navbar-end">
      

      
      <div class="navbar-item">
        <form id="cse-search-box-form-id" onsubmit="return executeQuery();" role="search">
          <div class="field has-addons">
            <div class="control is-expanded">
              <input id="cse-search-input-box-id" size=15 class="input" type="text" autocomplete="off"
                placeholder="&#xf1a0; Google search" style="font-family:Arial, FontAwesome">
            </div>

            <div class="control">
              <button type="submit" class="button is-black">
                <i class="fa fa-search"></i>
                </a>
              </button>
            </div>
          </div>
        </form>
      </div>
      
    </div>
  </div>
</nav><div class="columns is-centered">
        <div id="page-body" class="column is-7">

<div class="content blog">
    <h1 class="title">Covid-19 Api</h1>

    <div id="infobar" class="level is-mobile">
        <div class="level-left">
            
            <div class="level-item">
                <p class="subtitle info date">May 5, 2020
                </p>
            </div>
            

            <div class="level-item">
                <p class="subtitle info">
                    4 mins read
                </p>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            <div class="tags">
                
            </div>
        </div>
    </div>

    <div class="tags is-hidden-desktop">
        
    </div>

    <div class="blog-text">
        

        <p>Na początku tego wpisu postaram sie odpowiedzieć an trzy pytania dotyczące projektu Covid-19 App Co?, Dlaczego? i Jak?</p>
<h2 id="co">Co?</h2>
<p>Po rozmowach z kuzynem, postanowiłem napisać małą aplikacje wyświetlającą wykresy dotyczące statystyk zachorowań na Covid-19.</p>
<p>Aplikacja będzie obejmować front-end i back-end.</p>
<ol>
<li>Zadaniem back-endu będzie parsowanie plików csv dostarczonych przez to <a href="https://github.com/datasets/covid-19">repozytorium</a> oraz dostarczanie ich w postaci pliku JSON.</li>
<li>Zadaniem front-endu na początku będzie przedstawienie wykresów.</li>
</ol>
<h2 id="dlaczego">Dlaczego?</h2>
<p>Głównym cele projektu jest przedstawienie mapy zachorowań w wygodnej formie, oraz przejście przez cały proces tworzenia takiej aplikacji.</p>
<h2 id="jak">Jak?</h2>
<p>Na początku backend, zadaniem Api będzie zaczytywanie plików csv z GitHuba, sparsowanie ich do JSON oraz zapisanie do plików. Baza będzie dodana w późniejszym etapie.</p>
<h2 id="wymagania">Wymagania</h2>
<ol>
<li>Git</li>
<li>.Net Core 3.0</li>
<li>Linux (w moim przypadku Ubunut 18.04)</li>
</ol>
<h2 id="implementacja">Implementacja</h2>
<p>Do zaimplementowania szkieletu Api posłużę sie  wzorcem  Controller/Service/Repository.</p>
<p>W projekcie został również użyty Autofac do Dependency Injection.</p>
<h3 id="konfiguracja-di">Konfiguracja DI</h3>
<p>Aby skonfigurować DI należy dodać nowy plik <i>CsvModule.cs</i></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CsvModule</span> : Module
    {
        <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> Load(ContainerBuilder builder)
        {
            builder.RegisterType&lt;CsvRepository&gt;().As&lt;ICsvRepository&gt;();
            builder.RegisterType&lt;CsvService&gt;().As&lt;ICsvService&gt;();
        }
    }
</code></pre></div><p>Należy również zmodyfikować klasy 1. <i>Program.cs</i> i  2. <i>Startup.cs</i> o następujące linie.</p>
<ol>
<li></li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IHostBuilder CreateHostBuilder(<span style="color:#66d9ef">string</span>[] args) =&gt;
            Host.CreateDefaultBuilder(args)
                .UseServiceProviderFactory(<span style="color:#66d9ef">new</span> AutofacServiceProviderFactory()) <span style="color:#75715e">//&lt;--Tą linijkę należy dodać 
</span><span style="color:#75715e"></span>                .ConfigureWebHostDefaults(webBuilder =&gt;
                {
                    webBuilder.UseStartup&lt;Startup&gt;();
                });
</code></pre></div><ol start="2">
<li>Dodać do klasy Starup  następującą metodę</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ConfigureContainer(ContainerBuilder builder)
        {
            builder.RegisterModule(<span style="color:#66d9ef">new</span> CsvModule());
        }
</code></pre></div><h3 id="controllerservicerepository">Controller/Service/Repository</h3>
<p>Na potrzeby tego wzorca zostały stworzone następujące klasy i interfejsy. Aktualna implementacja nie zawiera zdefiniowanych modeli i obiektów Dto, będzie to dodane w
kolejnej wersji.</p>
<h3 id="interfejsy">Interfejsy</h3>
<ul>
<li>ICsvController.cs</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#">        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> ICsvController
        {
            <span style="color:#66d9ef">public</span> IActionResult GetAllRecords();
        }
</code></pre></div><ul>
<li>ICsvService.cs</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> ICsvService
    {
         <span style="color:#66d9ef">public</span> Task&lt;IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt;&gt;  GetAllRecords(); 
    }
</code></pre></div><ul>
<li>ICsvRepository.cs</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> ICsvRepository
    {
         <span style="color:#66d9ef">public</span> Task&lt;IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt;&gt; GetAllRecords();
    }
</code></pre></div><h3 id="klasy">Klasy</h3>
<ul>
<li>CsvController.cs</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#a6e22e">    [ApiController]</span>
<span style="color:#a6e22e">    [Route(&#34;CsvController&#34;)]</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CsvController</span> : ControllerBase, ICsvController
    {
        <span style="color:#66d9ef">private</span> ICsvService _csvService;

        <span style="color:#66d9ef">public</span> CsvController(
            ICsvService csvService
            )
        {
            _csvService = csvService;
                        <span style="color:#75715e">// _csvService = new CsvService();
</span><span style="color:#75715e"></span>
        }
<span style="color:#a6e22e">
</span><span style="color:#a6e22e">        [HttpGet]</span>
        <span style="color:#66d9ef">public</span> IActionResult GetAllRecords()
        {
            <span style="color:#66d9ef">var</span> list = <span style="color:#66d9ef">new</span> List&lt;<span style="color:#66d9ef">string</span>&gt;(){
                <span style="color:#e6db74">&#34;test&#34;</span>
            };

            <span style="color:#66d9ef">return</span> Ok(list);
        }
    }
</code></pre></div><ul>
<li>CsvService.cs</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CsvService</span> : ICsvService
    {
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> ICsvRepository _csvRepository;

        <span style="color:#66d9ef">public</span> CsvService(ICsvRepository csvRepository)
        {
            _csvRepository = csvRepository;
        }

        Task&lt;IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt;&gt; ICsvService.GetAllRecords()
        {
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> System.NotImplementedException();
        }
    }
</code></pre></div><p>-CsvRepository.cs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C#" data-lang="C#"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CsvRepository</span> : ICsvRepository
    {
        <span style="color:#66d9ef">public</span> Task&lt;IEnumerable&lt;<span style="color:#66d9ef">string</span>&gt;&gt; GetAllRecords()
        {
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> System.NotImplementedException();
        }
    }
</code></pre></div><h2 id="repo">Repo</h2>
<p>Link do <a href="https://github.com/radekwojpl2/Covid19-Api">repozytorium</a></p>

    </div>
</div><div id="social-media-share" class="has-text-centered">
	<p><i>Sharing is caring!</i></p>
	<br>
	
	<div class="share-buttons">
	    <a  href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f"
	        onclick="socialMediaPopUp(this.href, '', 500, 500); return false;"
	        title="Share on Facebook. Opens in a new window.">
	        <img src=/img/icons/45px/facebook.png>
	    </a>

	    <a  href="https://twitter.com/intent/tweet?text=Covid-19%20Api&url=http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f"
	        onclick="socialMediaPopUp(this.href, '', 500, 500); return false;"
	        title="Share on Twitter. Opens in a new window." >
	        <img src=/img/icons/45px/twitter.png>
	    </a>

		<a  href="http://www.reddit.com/submit?url=http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Reddit. Opens in a new window." >
	        <img src=/img/icons/45px/reddit.png>
	    </a>

	    <a  href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Pinterest. Opens in a new window." >
	        <img src=/img/icons/45px/pinterest.png>
	    </a>

	    <a  href="http://www.tumblr.com/share/link?url=http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Tumblr. Opens in a new window." >
	        <img src=/img/icons/45px/tumblr.png>
	    </a>

		<a  href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f
			&title=Covid-19%20Api&summary=Na%20pocz%c4%85tku%20tego%20wpisu%20postaram%20sie%20odpowiedzie%c4%87%20an%20trzy%20pytania%20dotycz%c4%85ce%20projektu%20Covid-19%20App%20Co%3f%2c%20Dlaczego%3f%20i%20Jak%3f%0aCo%3f%20Po%20rozmowach%20z%20kuzynem%2c%20postanowi%c5%82em%20napisa%c4%87%20ma%c5%82%c4%85%20aplikacje%20wy%c5%9bwietlaj%c4%85c%c4%85%20wykresy%20dotycz%c4%85ce%20statystyk%20zachorowa%c5%84%20na%20Covid-19.%0aAplikacja%20b%c4%99dzie%20obejmowa%c4%87%20front-end%20i%20back-end.&source=rafed123.github.io"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on LinkedIn. Opens in a new window." >
	        <img src=/img/icons/45px/linkedin.png>
	    </a>

	    <a  href="mailto:?subject=Covid-19%20Api&amp;body=Check out this site http%3a%2f%2fexample.org%2fcovid19project%2fcovid-19-api%2f"
	        title="Share via Email. Opens in a new window." >
	        <img src=/img/icons/45px/mail.png>
	    </a>
	</div>
</div>


<br>
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'disqus-code';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        </div>
    </div>
<script async src="https://cse.google.com/cse.js?cx=google-search-code"></script>
<gcse:searchresults-only></gcse:searchresults-only>


<footer class="footer has-background-dark">
    <div class="content has-text-centered has-text-white">
        <p>
            © 2020 Ramium. Powered by
            <a class="has-text-light" href="https://github.com/gohugoio/hugo" target="_blank">
            Hugo</a>. Theme
            <a class="has-text-light" href="https://github.com/rafed123/ramium/" target="_blank">
                Ramium.
            </a>
        </p>
    </div>
</footer>
</body>

</html>